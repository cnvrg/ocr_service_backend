apiVersion: v1
kind: Pod
metadata:
  name: "{{ include "ocr.fullname" . }}-test-demo"
spec:
  containers:
  - name: "{{ include "ocr.fullname" . }}-test-demo"
    image: {{ .Values.testDemo.image.repository }}/{{ .Values.testDemo.image.name }}:{{ .Values.testDemo.image.tag }}
    imagePullPolicy: Always
    command: ["bash", "-c"]
    args:
    - |   
      sleep 30s
      echo cd /root/ocr_service_backend/client && source local_service/setup_service_env.sh && python3 test_ocr_fastapi_client.py
      cd /root/ocr_service_backend/client && source local_service/setup_service_env.sh && python3 test_ocr_fastapi_client.py
      sleep 1h
    ports:
    - containerPort:  {{ .Values.service.targetPort }}
  imagePullSecrets:
  - name: {{ .Values.imagePullSecret }}
  terminationGracePeriodSeconds: {{ .Values.gracePeriod }}
